{
  "packages": [
    "python@3.11",
    "poetry",
    "github-cli",
    "jq",
    "git",
    "bash"
  ],
  "shell": {
    "init_hook": [
      "echo 'ðŸš€ Agentic CI Environment Loaded'",
      "echo 'Ensure you are logged in: gh auth status'",
      "chmod +x dev ci-loop.sh",
      
      "# --- Auto-Repair Logic ---",
      "if [ ! -f .venv/bin/aider-vertex ]; then",
      "  echo 'ðŸ“¦ Binary not found. Installing project in editable mode...'",
      "  poetry config virtualenvs.in-project true",
      "  poetry install",
      "fi",
      
      "# --- Activation Logic (Safe) ---",
      "# We do NOT exec bash here, because it breaks tools that use PTYs (like Aider).",
      "export PATH=$PWD/bin:$PATH",
      "source .venv/bin/activate"
    ],
    "scripts": {
      "dev": "./dev"
    }
  }
}